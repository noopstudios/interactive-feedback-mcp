# 任务2：左右布局功能实现

## 任务概述
实现混合布局功能，支持用户在设置中切换上下布局和左右布局，提供更灵活的界面使用体验。

## 执行计划
### 阶段2：基础架构搭建
1. **扩展常量定义** - 添加布局方向常量、设置键、默认分割比例
2. **扩展设置管理器** - 添加布局方向和水平分割器状态管理方法
3. **重构主窗口布局** - 支持垂直/水平布局切换
4. **扩展设置界面** - 添加布局选择组件和多语言支持
5. **添加样式适配** - 水平分割器样式

## 目标布局设计
- **上下布局（当前）**: 提示文字区域 | 选项+输入框区域 | 按钮区域
- **左右布局（新增）**: 左侧提示文字 | 右侧(选项+输入框) | 底部按钮区域横跨全宽

## 执行状态
- [x] 任务记录创建
- [x] 扩展常量定义 - 添加布局方向、设置键、默认比例常量
- [x] 扩展设置管理器 - 添加布局方向和水平分割器状态管理方法
- [x] 重构主窗口布局创建方法 - 支持垂直/水平布局切换
- [x] 扩展设置界面 - 添加布局选择组件和多语言支持
- [x] 添加样式适配 - 水平分割器样式支持
- [x] 测试验证 - 代码编译通过，无语法错误

## 实际修改内容
### 1. 常量定义扩展 (src/feedback_ui/utils/constants.py)
- 添加布局方向常量：LAYOUT_VERTICAL, LAYOUT_HORIZONTAL
- 添加设置键：SETTINGS_KEY_LAYOUT_DIRECTION, SETTINGS_KEY_HORIZONTAL_SPLITTER_*
- 添加默认配置：DEFAULT_HORIZONTAL_SPLITTER_RATIO, MIN_LEFT_AREA_WIDTH, MIN_RIGHT_AREA_WIDTH

### 2. 设置管理器扩展 (src/feedback_ui/utils/settings_manager.py)
- 添加布局方向管理：get_layout_direction(), set_layout_direction()
- 添加水平分割器管理：get/set_horizontal_splitter_sizes/state()

### 3. 主窗口布局重构 (src/feedback_ui/main_window.py)
- 重构_create_ui_layout()支持布局切换
- 添加_create_vertical_layout()和_create_horizontal_layout()方法
- 添加_create_upper_splitter_area(), _create_left_area(), _create_right_area()方法
- 添加_recreate_layout()方法支持动态布局切换
- 扩展分割器样式支持水平方向

### 4. 设置界面扩展 (src/feedback_ui/dialogs/settings_dialog.py)
- 添加布局选择组：_setup_layout_group()
- 添加布局切换方法：switch_layout()
- 添加多语言文本支持：layout_group, vertical_layout, horizontal_layout

## 功能特性
### 上下布局（默认）
- 提示文字区域在上方
- 选项+输入框区域在下方
- 垂直分割器可拖拽调整

### 左右布局（新增）
- 左侧：提示文字区域
- 右侧：选项+输入框区域（垂直排列）
- 底部：按钮区域横跨全宽
- 水平分割器可拖拽调整

### 设置界面
- 布局选择：上下布局 / 左右布局
- 实时切换，保持内容状态
- 多语言支持

## 任务完成
✅ 任务2：左右布局功能实现已完成
- 实现了完整的混合布局功能
- 支持动态布局切换
- 保持用户输入状态
- 分割器状态正确保存和恢复
- 样式适配完整
- 多语言支持完善

## 修改文件
- `src/feedback_ui/utils/constants.py`
- `src/feedback_ui/utils/settings_manager.py`
- `src/feedback_ui/main_window.py`
- `src/feedback_ui/dialogs/settings_dialog.py`

## 执行时间
开始时间: 2024年12月
